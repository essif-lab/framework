"use strict";(self.webpackChunkessif_lab=self.webpackChunkessif_lab||[]).push([[9307],{3905:function(e,t,a){a.d(t,{Zo:function(){return l},kt:function(){return m}});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var h=r.createContext({}),p=function(e){var t=r.useContext(h),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},l=function(e){var t=p(e.components);return r.createElement(h.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,h=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),f=p(a),m=n,d=f["".concat(h,".").concat(m)]||f[m]||c[m]||i;return a?r.createElement(d,o(o({ref:t},l),{},{components:a})):r.createElement(d,o({ref:t},l))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,o=new Array(i);o[0]=f;var s={};for(var h in t)hasOwnProperty.call(t,h)&&(s[h]=t[h]);s.originalType=e,s.mdxType="string"==typeof e?e:n,o[1]=s;for(var p=2;p<i;p++)o[p]=a[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,a)}f.displayName="MDXCreateElement"},1588:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return p},default:function(){return d},frontMatter:function(){return h},metadata:function(){return l},toc:function(){return f}});var r=a(3117),n=a(102),i=(a(7294),a(3905)),o=a(4996),s=["components"],h={id:"essifLab-fw",title:"eSSIF-Lab Framework",sidebar_label:"Framework",scopetag:"essifLab",date:20210601},p=void 0,l={unversionedId:"essifLab-fw",id:"essifLab-fw",title:"eSSIF-Lab Framework",description:"This page requires thorough revisions. While the basis is still valid, the contents on architecture(s) needs to be updated.",source:"@site/docs/essifLab-fw.md",sourceDirName:".",slug:"/essifLab-fw",permalink:"/framework/docs/essifLab-fw",draft:!1,editUrl:"https://github.com/essif-lab/framework/blob/master/docs/essifLab-fw.md",tags:[],version:"current",lastUpdatedBy:"Rieks",lastUpdatedAt:1697184556,formattedLastUpdatedAt:"Oct 13, 2023",frontMatter:{id:"essifLab-fw",title:"eSSIF-Lab Framework",sidebar_label:"Framework",scopetag:"essifLab",date:20210601}},c={},f=[{value:"2.1 eSSIF-Lab Scope",id:"21-essif-lab-scope",level:3},{value:"2.3 Business Transactions",id:"23-business-transactions",level:3},{value:"2.4 SSI Roles",id:"24-ssi-roles",level:3},{value:"2. Functional Architecture Overview",id:"2-functional-architecture-overview",level:2},{value:"2.1.  Business Transaction Layers",id:"21--business-transaction-layers",level:3},{value:"2.2.  SSI Roles Layer (Issuer, Verifier, Holder and Wallet)",id:"22--ssi-roles-layer-issuer-verifier-holder-and-wallet",level:3},{value:"2.3.  SSI Protocols and Crypto Layer",id:"23--ssi-protocols-and-crypto-layer",level:3},{value:"2.4.  API Layers (&#39;ESSIF Glue&#39; and &#39;SSI Tech APIs&#39;)",id:"24--api-layers-essif-glue-and-ssi-tech-apis",level:3},{value:"3. eSSIF-Lab Infrastructure Functional Components",id:"3-essif-lab-infrastructure-functional-components",level:2},{value:"3.1.  Data Collector and Validator Policy",id:"31--data-collector-and-validator-policy",level:3},{value:"3.2.   Verifier Component, and its Policy/Preferences",id:"32---verifier-component-and-its-policypreferences",level:3},{value:"3.3.   Holder Component, and its Policy/Preferences",id:"33---holder-component-and-its-policypreferences",level:3},{value:"3.4.  Data Discloser and Issuing Policy",id:"34--data-discloser-and-issuing-policy",level:3},{value:"3.5.  Issuer Component, and its Policy/Preferences",id:"35--issuer-component-and-its-policypreferences",level:3},{value:"3.6.  Wallet Component, and its Policy/Preferences",id:"36--wallet-component-and-its-policypreferences",level:3},{value:"4. Initial SSI-Agent Network Architecture",id:"4-initial-ssi-agent-network-architecture",level:2},{value:"5. High Level Transaction Flows",id:"5-high-level-transaction-flows",level:2},{value:"5.1.  Overview",id:"51--overview",level:3},{value:"5.2.  Transaction Negotiation Phase",id:"52--transaction-negotiation-phase",level:3},{value:"5.3.  Stating Transactions - Issuing Credentials",id:"53--stating-transactions---issuing-credentials",level:3},{value:"6. Detailed Transaction Flows",id:"6-detailed-transaction-flows",level:2},{value:"6.1.  Starting a Transaction",id:"61--starting-a-transaction",level:3},{value:"6.2.  Stating a Transaction",id:"62--stating-a-transaction",level:3}],m={toc:f};function d(e){var t=e.components,a=(0,n.Z)(e,s);return(0,i.kt)("wrapper",(0,r.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("admonition",{title:"Editor's note",type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("em",{parentName:"p"},"This page requires thorough revisions. While the basis is still valid, the contents on architecture(s) needs to be updated."))),(0,i.kt)("p",null,"Realizing the ",(0,i.kt)("a",{parentName:"p",href:"essifLab-vision"},"eSSIF-Lab vision")," is the main purpose of ",(0,i.kt)("a",{parentName:"p",href:"essifLab"},"eSSIF-Lab"),". This is quite a challenge, because of the different kinds of complexity involved:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"'horizontal' complexity, e.g. interop issues at the technical, semantical, process and business levels."),(0,i.kt)("li",{parentName:"ul"},"'vertical' complexity, e.g. coherence and consistency between business policies, its processes, the data/information used therein, and the technology that makes it work."),(0,i.kt)("li",{parentName:"ul"},"'ecosystem' complexity, e.g. creating and maintaining agreements about technical and semantical interop, ways of working (e.g. to ensure the quality of data), etc., within an '",(0,i.kt)("a",{parentName:"li",href:"@"},"ecosystem"),"' or a ",(0,i.kt)("a",{parentName:"li",href:"@"},"community")," context.")),(0,i.kt)("p",null,"To come to grips with such complexity, the eSSIF-Lab ",(0,i.kt)("a",{parentName:"p",href:"@"},"Framework")," aims to establish a varied set of articles/documents, ",(0,i.kt)("a",{parentName:"p",href:"@"},"terminology"),", and ",(0,i.kt)("a",{parentName:"p",href:"pattern@"},"mental models")," that individual ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," from different backgrounds can use e.g. as they"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"seek to use SSI, and want to learn about:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"benefits they may reap when they start to adopt SSI technologies;"),(0,i.kt)("li",{parentName:"ul"},"topics to consider for increasing levels of maturity;"),(0,i.kt)("li",{parentName:"ul"},"prerequisites for using SSI as a person or in a business;"),(0,i.kt)("li",{parentName:"ul"},"further benefits and ways of working together with other parties that use SSI."))),(0,i.kt)("li",{parentName:"ul"},"seek to contribute to technical developments in SSI, and want backgrounds about various functionalities",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"that exist in the context of SSI infrastructure;"),(0,i.kt)("li",{parentName:"ul"},"that are needed to connect business applications to such infrastructure;"),(0,i.kt)("li",{parentName:"ul"},"that facilitate ",(0,i.kt)("a",{parentName:"li",href:"@"},"communities")," and ",(0,i.kt)("a",{parentName:"li",href:"@"},"ecosystems")," of ",(0,i.kt)("a",{parentName:"li",href:"@"},"parties")," that use SSI."))),(0,i.kt)("li",{parentName:"ul"},"seek to contribute to the creation and management of ",(0,i.kt)("a",{parentName:"li",href:"@"},"communities")," and ",(0,i.kt)("a",{parentName:"li",href:"@"},"ecosystems")," of ",(0,i.kt)("a",{parentName:"li",href:"@"},"parties")," that use SSI that operate with decentralized authorities, i.e. authorities that respect the autonomy of other ",(0,i.kt)("a",{parentName:"li",href:"@"},"parties")," by refraining from imposing e.g. rules or duties on them that they then must comply with (or else...))."),(0,i.kt)("li",{parentName:"ul"},"seek a deeper understanding about the ",(0,i.kt)("a",{parentName:"li",href:"@"},"concepts")," and ",(0,i.kt)("a",{parentName:"li",href:"pattern@"},"mental models")," behind SSI, allowing them to contribute new ideas, applications and services for SSI.")),(0,i.kt)("h3",{id:"21-essif-lab-scope"},"2.1 eSSIF-Lab Scope"),(0,i.kt)("p",null,"In order to enable ",(0,i.kt)("a",{parentName:"p",href:"transaction@"},"interactions")," between different ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),", as described in the ",(0,i.kt)("a",{parentName:"p",href:"essifLab-vision"},"eSSIF-Lab vision"),", eSSIF-Lab focuses on the exchange and administration of relevant ",(0,i.kt)("a",{parentName:"p",href:"@"},"data"),", with a particular focus on the ",(0,i.kt)("a",{parentName:"p",href:"qualified-data@"},"qualifications")," and other assurances that are provided and/or needed. This makes its results particularly relevant for administrative organizations such as governmental bodies, financial institutions and the like. However, ",(0,i.kt)("em",{parentName:"p"},"every")," party will have use-cases in which it needs to (digitally) interact with other parties, so for them, the eSSIF-Lab work is relevant as well."),(0,i.kt)("p",null,"A party usually cannot realize its objectives on its own. To do this, the party needs to get itself organized, e.g. by defining the kinds of ",(0,i.kt)("a",{parentName:"p",href:"@"},"actions")," that might help to further the objectives, purchasing/hiring ",(0,i.kt)("a",{parentName:"p",href:"@"},"actors")," to do the work, managing the ",(0,i.kt)("a",{parentName:"p",href:"@"},"policies")," that specify how such actors should operate (making the policies appropriately accessible and interpretable). We use the term ",(0,i.kt)("a",{parentName:"p",href:"@"},"governance")," to refer to the activities/process that gets a party organized. The governance activities that are in scope of eSSIF-Lab relate to specifying the work, and maintaining the associated artifacts, that is related to the needs of parties as they (digitally) interact with one another."),(0,i.kt)("h3",{id:"23-business-transactions"},"2.3 Business Transactions"),(0,i.kt)("p",null,"In the eSSIF-Lab world view, ",(0,i.kt)("a",{parentName:"p",href:"@"},"actors")," interact with each other (as ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents")," for their ",(0,i.kt)("a",{parentName:"p",href:"@"},"principals"),") to negotiate and execute ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions"),". An agent uses the ",(0,i.kt)("a",{parentName:"p",href:"@"},"knowledge")," of its principal as its main guidance for such negotiations and execution. An agent may also use knowledge of other ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," to fill in any gaps, or to provide additional details, as necessary. The ",(0,i.kt)("a",{parentName:"p",href:"pattern-party-actor-action@"},"party-actor-action pattern")," explains the concepts behind this."),(0,i.kt)("p",null,"The participants of a transaction are ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),", that employ ",(0,i.kt)("a",{parentName:"p",href:"@"},"actors")," that do the associated work on their behalf. A party may employ different actors for executing different actions within a single transaction, each of which will use the knowledge of this party (its principal) to guide the execution of these actions, so that the entire transaction is performed according to how the party wants it to be done."),(0,i.kt)("p",null,"The ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Design_%26_Engineering_Methodology_for_Organizations"},(0,i.kt)("em",{parentName:"a"},"DEMO"))," transactions pattern (which is what we use) divides transactions in three phases:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"a negotiation phase, in which one or more agents of each ",(0,i.kt)("a",{parentName:"li",href:"@"},"participant")," exchange data for the purpose of establishing a ",(0,i.kt)("a",{parentName:"li",href:"transaction-agreement@"},"contract")," that specifies what the ",(0,i.kt)("a",{parentName:"li",href:"@"},"transaction")," entails. This phase results either in a commitment decision of all participants, or the termination of the transaction because one of them quits."),(0,i.kt)("li",{parentName:"ul"},"an execution phase, in which (perhaps other) agents of the same principals work (execute actions) to fulfill the ",(0,i.kt)("a",{parentName:"li",href:"@"},"obligations")," of the agreement. This phase results in them stating that they have completed that work (or that they gave up)."),(0,i.kt)("li",{parentName:"ul"},"the acceptance phase, in which one or more agents of each participant exchange data that leads to a decision to accept the results, or to escalate (e.g. start a lawsuit against the other participant)")),(0,i.kt)("h3",{id:"24-ssi-roles"},"2.4 SSI Roles"),(0,i.kt)("p",null,"In the various phases of a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),", each of its participants may need (one or more of its ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents"),") to do the following:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"request the ",(0,i.kt)("a",{parentName:"li",href:"@"},"data")," that it needs for making its commitment or acceptance decision, or for executing its part of the transaction;"),(0,i.kt)("li",{parentName:"ol"},"provide the ",(0,i.kt)("a",{parentName:"li",href:"@"},"data")," that the other participant(s) need for making their commitment/acceptance decision, or for executing its part of the transaction;"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"@"},"verify")," the response obtained from the other participant(s) to the data-request;"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("a",{parentName:"li",href:"@"},"validate")," the data obtained from the (",(0,i.kt)("a",{parentName:"li",href:"verify@"},"verified"),") response, preferably at the moment right before actually using it;"),(0,i.kt)("li",{parentName:"ol"},"state any intermediate and/or final results of the transaction to the other participant(s).")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Self-sovereign_identity"},"The basic structure of SSI contexts")," consists of participants referred to as 'Issuer', 'Holder', and 'Verifier', in a configuration referred to as a trust triangle (e.g. in ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model/#ecosystem-overview"},"W3C Verifiable Credentials Data Model"),", the ",(0,i.kt)("a",{parentName:"p",href:"https://freecontent.manning.com/the-basic-building-blocks-of-ssi/"},'book "Self-Sovereign Identity" (Reed, Preukschat, 2020)'),", and many, many more). In short, an ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model/#dfn-issuers"},"issuer")," typically issues ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model/#dfn-credential"},"verifiable credentials")," to a ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model/#dfn-holders"},"holder"),", which stores them securely under its own control. This accommodates point 5 (stating results)."),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model/#dfn-verifier"},"Verifiers")," typically request such credentials, perhaps better: a composition of data (called a ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model/#dfn-presentations"},"presentation"),") that a holder constructs from different such credentials and subsequently sends back in response to such a request, which accommodates points 1 and 2. Then, the verifier will ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model/#dfn-verify"},"verify")," this response (accommodating point 3)."),(0,i.kt)("p",null,"The fact that the ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model"},"W3C Verifiable Credentials Data Model")," does not provide for a validator role, and explicitly places ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model/#dfn-credential-validation"},"validation")," of credentials out of its scope, illustrates that we need more than just ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model/#dfn-verifiable-credentials"},"verifiable credentials")," (VCs). Indeed, protocols are needed e.g. for issuing credentials, ",(0,i.kt)("a",{parentName:"p",href:"https://identity.foundation/presentation-exchange/"},"exchanging presentations"),", revoking credentials etc. Such protocols may provoke the need for additional ",(0,i.kt)("a",{parentName:"p",href:"@"},"roles"),", e.g. a ",(0,i.kt)("inlineCode",{parentName:"p"},"revoker")," (that would revoke credentials), a ",(0,i.kt)("inlineCode",{parentName:"p"},"policy provider"),", etc."),(0,i.kt)("p",null,"In our ",(0,i.kt)("a",{parentName:"p",href:"@"},"framework"),", we postulate the existince of ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuers"),", ",(0,i.kt)("a",{parentName:"p",href:"@"},"holders"),", ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifiers")," and ",(0,i.kt)("a",{parentName:"p",href:"@"},"validators"),", which for our purposes we define as functional components (i.e. components that fit a functional architecture) and that can be readily realized as concrete technical components that can be deployed in run-time contexts to act as ",(0,i.kt)("a",{parentName:"p",href:"agent@"},"digital agents")," for arbitrary ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),". It is not exactly the same, but nevertheless in line with the ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model/#terminology"},"W3C VC Terminology"),", which states (with the obvious exception of the validator) that they are roles that ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model/#dfn-entities"},"entities")," can or might perform as they execute some function(s)."),(0,i.kt)("p",null,"As mentioned before, we expect that more functionalities and/or ",(0,i.kt)("a",{parentName:"p",href:"@"},"roles")," are necessary to make it all work, e.g. that of ",(0,i.kt)("a",{parentName:"p",href:"@"},"agent"),", ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),", ",(0,i.kt)("a",{parentName:"p",href:"@"},"owner"),", ",(0,i.kt)("a",{parentName:"p",href:"management@"},"manager"),", ",(0,i.kt)("a",{parentName:"p",href:"governance@"},"governor"),", ",(0,i.kt)("a",{parentName:"p",href:"@"},"guardian"),", ",(0,i.kt)("a",{parentName:"p",href:"@"},"dependent"),", etc. The bulk of these roles will likely not be of technical nature, but more fitted to the higher architectural levels, e.g. of information architecture, process architecture, governance etc."),(0,i.kt)("h2",{id:"2-functional-architecture-overview"},"2. Functional Architecture Overview"),(0,i.kt)("p",null,"Figure 1 shows the initial ",(0,i.kt)("em",{parentName:"p"},"functional")," eSSIF-Lab architecture, and its scope, context and ",(0,i.kt)("em",{parentName:"p"},"functional")," components each of which is a (",(0,i.kt)("em",{parentName:"p"},"functional"),") ",(0,i.kt)("a",{parentName:"p",href:"@"},"agent")," for the same party (meaning that they are all part of the same organization as defined above, and they are all (digital) 'Colleagues' of one another)."),(0,i.kt)("p",null,"Please be aware that ",(0,i.kt)("em",{parentName:"p"},"functional")," ",(0,i.kt)("a",{parentName:"p",href:"@"},"capabilities"),", components, ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents"),", etc. do not necessarily coincide with ",(0,i.kt)("em",{parentName:"p"},"technical")," ",(0,i.kt)("a",{parentName:"p",href:"@"},"capabilities"),", components, ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents"),", etc. The technical components can be deployed (downloaded, installed, run), whereas a functional component is a provider of a specified set of ",(0,i.kt)("a",{parentName:"p",href:"@"},"capabilities"),"/functionalities an implementation of which can be made part of a technical component. So it is conceivable that a technical component contains an implementation of ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer"),", ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet"),", ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," and ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," functional components as well as other functionalities that are not described here, e.g. related to UX, setting ",(0,i.kt)("a",{parentName:"p",href:"policy@"},"preferences"),", and more. In this functional architecture, the default type of components, ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents")," etc. are ",(0,i.kt)("em",{parentName:"p"},"functional"),"."),(0,i.kt)("p",null,"Since the ",(0,i.kt)("a",{parentName:"p",href:"@"},"participants")," of a ",(0,i.kt)("a",{parentName:"p",href:"transaction@"},"(business) transaction")," are different ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),", the negotiation, commitment and execution of that ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," will be done by ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents")," of these ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),". Assuming that a single ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," has two such ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),", we will use the term '",(0,i.kt)("a",{parentName:"p",href:"@"},"Peer Party")," (of a specific ",(0,i.kt)("a",{parentName:"p",href:"@"},"party"),", in the context of a single ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),")' to refer to the participating ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," in that ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," that is not the specific ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," itself."),(0,i.kt)("p",null,"When an ",(0,i.kt)("a",{parentName:"p",href:"@"},"agent")," is involved in such a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),", it will be communicating with a component that it assumes to be an ",(0,i.kt)("a",{parentName:"p",href:"@"},"agent")," of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"peer party")," of its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," (the ",(0,i.kt)("a",{parentName:"p",href:"@"},"agent")," may obtain further assurances for that, but that's outside the scope for now). We will use the term '",(0,i.kt)("a",{parentName:"p",href:"@"},"peer agent")," (of a specific ",(0,i.kt)("a",{parentName:"p",href:"@"},"agent"),", in the context of a single ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),")' to refer to an ",(0,i.kt)("a",{parentName:"p",href:"@"},"actor")," with which the specific ",(0,i.kt)("a",{parentName:"p",href:"@"},"agent")," has a communication session. Note that establishing whether or not an ",(0,i.kt)("a",{parentName:"p",href:"@"},"actor")," is a ",(0,i.kt)("a",{parentName:"p",href:"@"},"Peer Agent")," does not necessarily require knowing who the ",(0,i.kt)("a",{parentName:"p",href:"@"},"peer party")," actually is."),(0,i.kt)("p",null,"The figure below is an overview of the most important ",(0,i.kt)("em",{parentName:"p"},"functional")," components that any ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," needs to conduct electronic ",(0,i.kt)("a",{parentName:"p",href:"transaction@"},"(business) transactions"),"."),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{alt:"eSSIF-Lab Single Party Functional Architecture Overview",src:(0,o.Z)("images/essif-lab-functional-architecture.png")}),(0,i.kt)("i",null,"Figure 1. eSSIF-Lab Single Party Functional Architecture Overview.")),(0,i.kt)("p",null,"We use the following coloring conventions in this figure: red is business related, which means that we do not consider this to be part of the SSI Infrastructure. Brown is used for policies, which are defined by (or on behalf) of the principal of the component that uses them to configure themselves, and/or act according to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal's")," preferences and ",(0,i.kt)("a",{parentName:"p",href:"@"},"policies"),". Green is used for generic SSI infrastructure related functions, and blue represents functions that may be implemented as 'plug-ins' for specific SSI-related technologies."),(0,i.kt)("p",null,"The remainder of this chapter describes the layers and their components at a high abstraction level. "),(0,i.kt)("h3",{id:"21--business-transaction-layers"},"2.1.  Business Transaction Layers"),(0,i.kt)("p",null,"At the top of the figure are two business-related layers. Both are within the scope of the eSSIF-Lab project/architecture, yet they are outside the scope of the eSSIF-Lab infrastructure/architecture - that is because they are too business-specific."),(0,i.kt)("p",null,"The top layer (in the red rounded rectangle) has the functions of actual ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions"),": it starts with a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction form"),", the data of which is valid, consistent and complete, from which the (business) decision can be made whether or not to engage in a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),", and that has everything necessary to actually execute that ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),". The (administrative) results of such a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," are then stored in business data stores. We have put this layer in the eSSIF-Lab architecture for the single purpose of showing how the components of the bottom layer contribute to conduct ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions"),"."),(0,i.kt)("p",null,"The lower business layer contains two functional components, one for initiating ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions")," and the other for stating ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," results (as per the ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Design_%26_Engineering_Methodology_for_Organizations"},(0,i.kt)("em",{parentName:"a"},"DEMO"))," method), each of which with an associated business ",(0,i.kt)("a",{parentName:"p",href:"@"},"policy")," that contains business-specific ",(0,i.kt)("a",{parentName:"p",href:"@"},"policies"),"."),(0,i.kt)("p",null,"The task of the Data Collector (or Data Collector) is to handle and initiate requests from/to ",(0,i.kt)("a",{parentName:"p",href:"peer-agent@"},"peer agents")," to engage in some kind of ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),", by negotiating and exchanging data (through one or more, physical or electronic communication channels), and to produce a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," form whose contents are complete and valid, enabling an appropriate Colleague to decide whether or not to engage in the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),". Note that negotiating a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," has two parts: requesting a ",(0,i.kt)("a",{parentName:"p",href:"@"},"peer agent")," to provide data that its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," needs, and providing data on behalf of its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," that a ",(0,i.kt)("a",{parentName:"p",href:"@"},"peer agent")," requests. After all, a ",(0,i.kt)("a",{parentName:"p",href:"transaction@"},"business transaction")," can only start after all ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," have decided to commit, which they can only do after each of them has obtained the information it (subjectively) needs to do so. Also note that data that the data collector must ensure that the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," context is properly maintained if it chooses to exchange data through different communication channels."),(0,i.kt)("p",null,"The task of the data discloser (or data discloser) is to state the (various, sometimes intermediary) results of ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions"),", by collecting data from the Business Data Stores, and creating a set of (related) statements/claims that can subsequently be issued to other ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),". Since such state-data may change, issuing data that supersedes an earlier state implies the revocation of such a state."),(0,i.kt)("p",null,"Note that both components are within scope of eSSIF-Lab architecture, but NOT in scope of the eSSIF-Lab infrastructure, as they are too business-specific."),(0,i.kt)("h3",{id:"22--ssi-roles-layer-issuer-verifier-holder-and-wallet"},"2.2.  SSI Roles Layer (Issuer, Verifier, Holder and Wallet)"),(0,i.kt)("p",null,"The SSI Roles Layer contains functional components that provide the functionality associated with the well-known roles of issuer, holder, wallet and verifier. Technical components that provide such functionalities are part of the eSSIF-Lab (technical) infrastructure."),(0,i.kt)("p",null,"Apart from each having a specific task, as described below, implementations that are being deployed by one party should be aligned in that they support the same (sub)set(s) of SSI Protocols and Crypto features, as described in the following section."),(0,i.kt)("p",null,"The ",(0,i.kt)("strong",{parentName:"p"},"issuer")," functionality includes the issuing of what we will generically call 'credentials', i.e. sets of (related) statements/claims (e.g. as produced by the data discloser) that have metadata (e.g. date of issuing) and a digital signature by which third ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," can prove its provenance and integrity. Another function of the issuer is to handle revocation (and (un)suspension) of credentials that it has issued. For such tasks, it relies on functions that are made available by the SSI Protocols and Crypto Layer."),(0,i.kt)("p",null,"The ",(0,i.kt)("strong",{parentName:"p"},"wallet")," functionality includes the (secure) storage of credentials - both those that have been issued by the issuer (i.e. self-signed credentials) and those that have been obtained from issuers of other ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),". Another task of the wallet is to (securely) store (private) keys that can be used to sign or seal data on behalf of its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),". Perhaps the most important task of the wallet is to ensure that credentials and keys can only become available to another component if they have the same (single) ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),", and will become available if such other component implements a functionality that needs it."),(0,i.kt)("p",null,"The ",(0,i.kt)("strong",{parentName:"p"},"verifier")," functionality is to support the data collector as it tries to acquire credentials from some other party for the purpose of negotiating a ",(0,i.kt)("a",{parentName:"p",href:"transaction@"},"business transaction"),". It does so by creating ",(0,i.kt)("a",{parentName:"p",href:"presentation-request@"},"presentation requests")," (or Presentation Definition as it is called in the ",(0,i.kt)("a",{parentName:"p",href:"https://identity.foundation/presentation-exchange"},"draft DIF specfication for Presentation Exchange"),") that ask for such credentials, sending them to a holder component of another party, receiving a response to such a request (which we call a '",(0,i.kt)("a",{parentName:"p",href:"@"},"presentation"),"'), verifying the ",(0,i.kt)("a",{parentName:"p",href:"@"},"presentation"),", i.e. checking the signature and other proofs of the veracity of both the construction of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"presentation")," as well as its contents, thus providing the Data Collector with verified data."),(0,i.kt)("p",null,"The task of the ",(0,i.kt)("strong",{parentName:"p"},"holder")," is to handle ",(0,i.kt)("a",{parentName:"p",href:"presentation-request@"},"presentation requests")," that it receives from verifier components (both of its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),", and of other ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),"). Typically, this means looking for the requested data in the ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal's")," wallet, and using it to construct a ",(0,i.kt)("a",{parentName:"p",href:"@"},"presentation")," (=response). However, if the wallet doesn't have it, the holder may negotiate a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," with a component of the designated issuer for the purpose of obtaining the needed credential, which - when obtained - it can subsequently store in the wallet and use in the ",(0,i.kt)("a",{parentName:"p",href:"@"},"presentation"),"."),(0,i.kt)("h3",{id:"23--ssi-protocols-and-crypto-layer"},"2.3.  SSI Protocols and Crypto Layer"),(0,i.kt)("p",null,"While represented as a layer, the SSI Protocols and Crypto Layer can be seen more as a set of libraries that can be used by wallet, holder, issuer and ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," (WHIV) components for the purpose of actually implementing some/all of the functionality that they need to provide. Each 'Component' in this layer implements a specific technology, and any implementation of any of the WHIV components may choose which of these to use. Of course, if one of the WHIV components implements a technology, it would seem that the others would need to do so, too."),(0,i.kt)("p",null,"Technologies may come as a (proprietary or open source) library, as a service (offered by one or more ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),"), or both. There are way too many to mention here, but to give you an idea, here is a classification of such underlying/supporting technologies that seems to be useful. While we do mention some technologies explicitly, this should in no way be interpreted as that this would be necessary to support, or that others are not to be considered."),(0,i.kt)("p",null,"First, we have ",(0,i.kt)("strong",{parentName:"p"},"credential-related technologies"),", most often in the form of libraries, basically for the creation, (storing,) and verification of specific kinds of ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," such as ",(0,i.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/vc-data-model/"},(0,i.kt)("em",{parentName:"a"},"Verifiable Credentials"))," (VCs), ",(0,i.kt)("a",{parentName:"p",href:"https://abc4trust.eu/index.php/pub"},(0,i.kt)("em",{parentName:"a"},"Attribute Based Credentials")),(0,i.kt)("sup",null,"[ABC]")," (ABCs), ",(0,i.kt)("a",{parentName:"p",href:"https://www.itu.int/rec/dologin_pub.asp?lang=e&id=T-REC-X.509-201210-S!!PDF-E"},(0,i.kt)("em",{parentName:"a"},"X.509 Attribute Certificates")),", ",(0,i.kt)("a",{parentName:"p",href:"https://openid.net/developers/specs/"},(0,i.kt)("em",{parentName:"a"},"OIDC"))," tokens, etc. Various projects/implementations can already be used here, such as ",(0,i.kt)("a",{parentName:"p",href:"https://www.hyperledger.org/projects/aries"},(0,i.kt)("em",{parentName:"a"},"Hyperledger Aries")),", ",(0,i.kt)("a",{parentName:"p",href:"https://privacybydesign.foundation/irma-en/"},(0,i.kt)("em",{parentName:"a"},"IRMA")),", ",(0,i.kt)("a",{parentName:"p",href:"https://opencerts.io/"},(0,i.kt)("em",{parentName:"a"},"OpenCerts")),", ",(0,i.kt)("a",{parentName:"p",href:"https://www.blockcerts.org/"},(0,i.kt)("em",{parentName:"a"},"BlockCerts")),", and more."),(0,i.kt)("p",null,"Then, there are ",(0,i.kt)("strong",{parentName:"p"},"secure communications technologies"),", for the purposes of (a) ensuring that a technical component owned by a specific ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," can recognize that another component as one that it has had previous communications with and/or is owned by an identified ",(0,i.kt)("a",{parentName:"p",href:"@"},"party"),", and (b) setting up a secure ",(0,i.kt)("a",{parentName:"p",href:"@"},"communication channel"),", i.e. one that guarantees message confidentiality (encryption) and integrity/authentication. A well-known way to do this is SSL, but new ones are being developed, such as ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/hyperledger/aries-rfcs/tree/master/concepts/0005-didcomm"},(0,i.kt)("em",{parentName:"a"},"DID Comm(unication)")),", that uses ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/WebOfTrustInfo/rwot8-barcelona/blob/master/draft-documents/peer-DID-method-spec-report.md"},(0,i.kt)("em",{parentName:"a"},"peer DIDs"))," (work in progress)."),(0,i.kt)("p",null,"Another important category is that of ",(0,i.kt)("strong",{parentName:"p"},"crypto (related) technologies"),", which are used for various purposes, such as creating/verifying digital signatures, zero-knowledge-proofs, etc. Such technologies may come as a library (e.g. ",(0,i.kt)("a",{parentName:"p",href:"https://www.hyperledger.org/projects/hyperledger-ursa"},(0,i.kt)("em",{parentName:"a"},"Hyperledger/Ursa")),"), or as a service, e.g. an ",(0,i.kt)("a",{parentName:"p",href:"https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32014R0910&from=EN"},(0,i.kt)("em",{parentName:"a"},"eIDAS")),(0,i.kt)("sup",null,"[eIDAS]")," trust service."),(0,i.kt)("p",null,"We conclude for now by mentioning ",(0,i.kt)("strong",{parentName:"p"},"blockchain/distributed ledger technologies"),", for secure logging of (e.g. registration) events, where such logs have the property that it is virtually impossible to change the order and/or contents of the logged events, and that the logs are highly available to those that are authorized. Both public and private blockchains are known to be used, and different SSI-solutions may use them for different purposes, e.g. the registration of schema's, ",(0,i.kt)("a",{parentName:"p",href:"credential-type@"},"credential types"),", DIDs and associated DID documents, revocation accumulators, etc. Examples include ",(0,i.kt)("a",{parentName:"p",href:"https://ec.europa.eu/cefdigital/wiki/display/CEFDIGITAL/ebsi"},(0,i.kt)("em",{parentName:"a"},"EBSI"))," (",(0,i.kt)("a",{parentName:"p",href:"https://ec.europa.eu/digital-single-market/en/blockchain-technologies"},(0,i.kt)("em",{parentName:"a"},"European Blockchain Partnership")),"), ",(0,i.kt)("a",{parentName:"p",href:"https://www.hyperledger.org/projects/hyperledger-indy"},(0,i.kt)("em",{parentName:"a"},"Hyperledger Indy"))," (Alastria, Findy, Sovrin), Ethereum (",(0,i.kt)("a",{parentName:"p",href:"https://opencerts.io/"},(0,i.kt)("em",{parentName:"a"},"OpenCerts")),", ",(0,i.kt)("a",{parentName:"p",href:"https://www.blockcerts.org/"},(0,i.kt)("em",{parentName:"a"},"BlockCerts")),"), bitcoin (",(0,i.kt)("a",{parentName:"p",href:"https://www.blockcerts.org/"},(0,i.kt)("em",{parentName:"a"},"BlockCerts")),") and many more."),(0,i.kt)("p",null,"It is expected that there are already some interfaces out there that may turn out to be useful here (e.g. (unverified) ",(0,i.kt)("a",{parentName:"p",href:"https://fiware-idm.readthedocs.io/en/7.4.0/eidas/"},(0,i.kt)("em",{parentName:"a"},"FIWARE")),", CEF)"),(0,i.kt)("hr",null),(0,i.kt)("p",null,"[ABC]"," Its origins lie with the ",(0,i.kt)("a",{parentName:"p",href:"https://abc4trust.eu/"},(0,i.kt)("em",{parentName:"a"},"ABC4Trust project")),". Extensive ",(0,i.kt)("a",{parentName:"p",href:"https://abc4trust.eu/index.php/pub"},(0,i.kt)("em",{parentName:"a"},"documentation"))," is available, e.g. an ",(0,i.kt)("a",{parentName:"p",href:"https://abc4trust.eu/download/Deliverable_D2.2.pdf"},(0,i.kt)("em",{parentName:"a"},"Architecture for Attribute-based Credential Technologies"))," (also one ",(0,i.kt)("a",{parentName:"p",href:"https://abc4trust.eu/download/ABC4Trust-H2.2_ABC4Trust_Architecture_for_Developers.pdf"},(0,i.kt)("em",{parentName:"a"},"for developers")),")."),(0,i.kt)("p",null,"[eIDAS5]",(0,i.kt)("em",{parentName:"p"},'"Regulation (EU) No 910/2014 of the European Parliament and of the Council of 23 July 2014 on electronic identification and trust services for electronic ',(0,i.kt)("a",{parentName:"em",href:"@"},"transactions"),' in the internal market and repealing Directive 1999/93/EC"'),"](",(0,i.kt)("a",{parentName:"p",href:"http://eur-lex.europa.eu/legal-content/EN/TXT/?uri=uriserv:OJ.L_.2014.257.01.0073.01.ENG"},"http://eur-lex.europa.eu/legal-content/EN/TXT/?uri=uriserv:OJ.L_.2014.257.01.0073.01.ENG"),"). ",(0,i.kt)("em",{parentName:"p"},"EUR-Lex"),". The European Parliament and the Council of the European Union."),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"24--api-layers-essif-glue-and-ssi-tech-apis"},"2.4.  API Layers ('ESSIF Glue' and 'SSI Tech APIs')"),(0,i.kt)("p",null,"There are two interface layers in this architecture"),(0,i.kt)("p",null,"The '",(0,i.kt)("strong",{parentName:"p"},"ESSIF Glue"),"' interface layer consists of a ",(0,i.kt)("a",{parentName:"p",href:"https://gitlab.grnet.gr/essif-lab/tno-ssi-service/developer-docs"},"documented set of APIs")," between the data collector and data discloser on the one hand, and the WHIV components on the other hand. The purpose of these APIs is to make calling the WHIV functions as simple as possible, given the functions of the data discloser and data collector. Ultimately, we would like to see these APIs standardized. Having such APIs allows different ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," to create their own version of the WHIV components, supporting the SSI technologies as they see fit, and shrinking or expanding functionalities as they feel appropriate. ",(0,i.kt)("a",{parentName:"p",href:"@"},"Parties")," can then select such WHIV components as they see fit."),(0,i.kt)("p",null,"The ",(0,i.kt)("strong",{parentName:"p"},"SSI Tech APIs")," interface layer is the union of the interfaces of the components within it. Any standardization in there is outside the scope of eSSIF-Lab."),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"3-essif-lab-infrastructure-functional-components"},"3. eSSIF-Lab Infrastructure Functional Components"),(0,i.kt)("p",null,"This section details the functional specifications of the components that are in scope of the eSSIF-Lab infrastructure, i.e. in the green (rounded) rectangle as shown in the figure below:"),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{alt:"eSSIF-Lab infrastructural (functional) components",src:(0,o.Z)("images/essif-lab-functional-architecture-infra.png")}),(0,i.kt)("i",null,"Figure 2: eSSIF-Lab infrastructural (functional) components.")),(0,i.kt)("h3",{id:"31--data-collector-and-validator-policy"},"3.1.  Data Collector and Validator Policy"),(0,i.kt)("p",null,"The purpose of the data collector is to produce (transaction-type specific) data structures or forms, each of which contains the necessary and sufficient data that allows (an ",(0,i.kt)("a",{parentName:"p",href:"@"},"agent")," of) its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," to decide whether or not to engage in a (new) ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," of the specified type."),(0,i.kt)("p",null,"Typically, the data collector would start a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," either"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"when it receives a request from some ",(0,i.kt)("a",{parentName:"li",href:"@"},"agent")," of another ",(0,i.kt)("a",{parentName:"li",href:"@"},"party")," for engaging in a ",(0,i.kt)("a",{parentName:"li",href:"@"},"transaction")," of a specific kind."),(0,i.kt)("li",{parentName:"ul"},"when it is instructed by, or on behalf of its ",(0,i.kt)("a",{parentName:"li",href:"@"},"principal"),", to request a specific kind of ",(0,i.kt)("a",{parentName:"li",href:"@"},"transaction")," to some ",(0,i.kt)("a",{parentName:"li",href:"@"},"agent")," of another ",(0,i.kt)("a",{parentName:"li",href:"@"},"party"),".",(0,i.kt)("sup",{parentName:"li",id:"fnref-dc.1"},(0,i.kt)("a",{parentName:"sup",href:"#fn-dc.1",className:"footnote-ref"},"DC.1")))),(0,i.kt)("p",null,"In either case, a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," form (object, context) has to be created that matches the kind of ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),", and a '",(0,i.kt)("strong",{parentName:"p"},"transaction-id"),"' must be generated that identifies this form/object/context. It will be used for binding incoming or outgoing messages to this ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),", enabling communications to remain congruent, not only with the ",(0,i.kt)("a",{parentName:"p",href:"@"},"agent")," that requested the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),", but also with other ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents")," from the same ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," and/or using different ",(0,i.kt)("a",{parentName:"p",href:"communication-channel@"},"communication channels"),"."),(0,i.kt)("p",null,"Handling/managing the various ",(0,i.kt)("a",{parentName:"p",href:"communication-channel@"},"communication channels")," through which data can be exchanged is also a task of the Data Collector",(0,i.kt)("sup",{parentName:"p",id:"fnref-dc.2"},(0,i.kt)("a",{parentName:"sup",href:"#fn-dc.2",className:"footnote-ref"},"DC.2")),". One reason for this is that negotiating a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," not only requires data to be acquired, but also to be provided to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"peer party"),". Another reason is that the ",(0,i.kt)("a",{parentName:"p",href:"@"},"peer party")," may use multiple ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents")," to provide such data, e.g. human ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents")," (that might use web-browsers, social-media apps, phones, or physical visits), ",(0,i.kt)("a",{parentName:"p",href:"@"},"SSI-agents")," (that use the SSI infrastructure), or other ",(0,i.kt)("a",{parentName:"p",href:"agent@"},"electronic agents")," (e.g. services that can provide data when appropriate permissions are submitted - e.g. user consent tokens)."),(0,i.kt)("p",null,"Thus, the data collector is generally considered capable of obtaining data through different ",(0,i.kt)("a",{parentName:"p",href:"communication-channel@"},"communication channels"),". However, the technical tracks of eSSIF-Lab will exclusively focus on the ",(0,i.kt)("a",{parentName:"p",href:"@"},"communication channel")," through which ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," can be requested and obtained. Any extensions or business productization of data collector designs may be considered in the business tracks of eSSIF-Lab. The latter is not considered any further in this section."),(0,i.kt)("p",null,"In order to acquire data through SSI mechanisms for filling in a form for a specific kind of ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),", the data collector needs to know what kinds of ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," it should ask for, which ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," trusts to issue such ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials"),", what kinds of verification proofs for such ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," must hold and which may be disregarded.",(0,i.kt)("sup",{parentName:"p",id:"fnref-dc.3"},(0,i.kt)("a",{parentName:"sup",href:"#fn-dc.3",className:"footnote-ref"},"DC.3"))," Also, when the data collector gets a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," that satisfies the necessary verification proofs, it needs a way to map the contents of that ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," to the structure of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," context that is used internally by (other systems of) its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),".",(0,i.kt)("sup",{parentName:"p",id:"fnref-dc.4"},(0,i.kt)("a",{parentName:"sup",href:"#fn-dc.4",className:"footnote-ref"},"DC.4"))," Also, as the data collector gets more and more data - which it may get through multiple, different channels - it needs to determine whether or not the resulting set is sufficiently consistent and coherent.",(0,i.kt)("sup",{parentName:"p",id:"fnref-dc.5"},(0,i.kt)("a",{parentName:"sup",href:"#fn-dc.5",className:"footnote-ref"},"DC.5"))),(0,i.kt)("p",null,"In order to make the data collector work, a ",(0,i.kt)("a",{parentName:"p",href:"@"},"validator policy")," (or data collector policy) is created by, or on behalf of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),", which specifies at least:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"the kinds of ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions")," the ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," is willing to (electronically) engage in, from both the requester and the provider perspectives;")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"for each such transaction termtype:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"the criteria (business rules) that should be used to determine that the form is 'clean', i.e. that the necessary and sufficient data have been obtained and that they are consistent, coherent, and suitable for making a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," commitment decision.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"the kinds of ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," and ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuers")," that the ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," is willing to accept as sources for valid data; (optionally?), the endpoint URI at which issuing ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," do the actual ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," issuing may be specified",(0,i.kt)("sup",{parentName:"p",id:"fnref-dc.6"},(0,i.kt)("a",{parentName:"sup",href:"#fn-dc.6",className:"footnote-ref"},"DC.6")),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"for each kind of ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential"),": the verification proofs that must hold to be accepted as a source for valid data.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"the mapping between fields in such ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," and fields in the form to be filled in."))))),(0,i.kt)("p",null,"The ",(0,i.kt)("a",{parentName:"p",href:"@"},"policy")," must be designed in such a way that it is extendable as new features will be called for in the future."),(0,i.kt)("p",null,"The ability to create new ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," contexts and the availability of the data collector policy enable the data collector to request the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," component of its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," to obtain ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," of the types that it can use to fill in the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction form")," when they satisfy the verification and validation requirements of its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),".",(0,i.kt)("sup",{parentName:"p",id:"fnref-dc.7"},(0,i.kt)("a",{parentName:"sup",href:"#fn-dc.7",className:"footnote-ref"},"DC.7"))),(0,i.kt)("p",null,"When the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," returns such data (which comes with a list of proofs that the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," has checked), the data collector must then validate that data, i.e. determine whether or not it is valid for the specific ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," it is assembling the data for. The validation rules are ",(0,i.kt)("a",{parentName:"p",href:"@"},"party"),"-specific and hence come from the data collector policy. For simple cases, validation can simply consist of checking whether or not all verification proofs succeeded. At the other end of the validation spectrum, the data collector itself must make validation decisions, either electronically (according to the data collector policy) or by 'outsourcing' such decisions to human ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents")," of its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," by providing an appropriate validation user interface."),(0,i.kt)("p",null,"As long as data is needed, the data collector can intermittently request the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," to produce it (or it can use other ",(0,i.kt)("a",{parentName:"p",href:"communication-channel@"},"communication channels"),", which is outside scope for now). It does so until it times out, or the form has become 'clean'."),(0,i.kt)("hr",null),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"32---verifier-component-and-its-policypreferences"},"3.2.   Verifier Component, and its Policy/Preferences"),(0,i.kt)("p",null,"The purpose of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," component is to support the data collector by providing it with a single, simple API that it can use to request and obtain data that it needs to produce a clean ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction form"),", as well as the results of checking verification proofs (this is also why it is called the '",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier"),"' component)."),(0,i.kt)("p",null,"Typically, the data collector would ask the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," to provide a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," that it can use to fill in a (coherent set of) field(s) in the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction form"),". It is realistic to think that ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," from different ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuers")," - trusted by the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier's")," ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," - can be used for this purpose. However, it is also realistic that such ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," will not use the same ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential type")," - they might well use different schemes to provide such data. Therefore, the data collector should specify a list of pairs (",(0,i.kt)("a",{parentName:"p",href:"@"},"credential-type"),", ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer"),") instances of which could all be used to provide the data it needs - which it can obtain from the data collector policy."),(0,i.kt)("p",null,"Then, the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," needs to know the address and protocol that it can use to reach a ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," component owned by the ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," that its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," is trying to negotiate the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," with. The data collector specifies this as part of the request - and it can do so because it has received the original request, and does all ",(0,i.kt)("a",{parentName:"p",href:"@"},"communication channel")," handling."),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"@"},"verifiers")," are not expected to handle every kind of ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," (e.g. VC's, ABC's, etc.) that exists, but rather a specific subset. For (at least one of) the ",(0,i.kt)("a",{parentName:"p",href:"credential-type@"},"credential types"),", the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," can construct a so-called ",(0,i.kt)("a",{parentName:"p",href:"@"},"presentation request"),", i.e. a message that is specific for the ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential type")," and/or associated protocol, which it can then send to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder's")," address."),(0,i.kt)("p",null,"This request message should contain at least"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"the ",(0,i.kt)("a",{parentName:"li",href:"@"},"transaction-id"),", so that when it is copied into the associated response message, the latter can be associated to the ",(0,i.kt)("a",{parentName:"li",href:"@"},"transaction")," it belongs to. Also, it should contain the"),(0,i.kt)("li",{parentName:"ul"},"the (",(0,i.kt)("a",{parentName:"li",href:"@"},"credential type"),", ",(0,i.kt)("a",{parentName:"li",href:"@"},"issuer"),") pairs that may satisfy the request, and to each of these additional data, e.g. the URI of the endpoint where the ",(0,i.kt)("a",{parentName:"li",href:"@"},"issuer")," issues such ",(0,i.kt)("a",{parentName:"li",href:"@"},"credentials"),", the maximum age of the ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential"),", etc."),(0,i.kt)("li",{parentName:"ul"},"meta-data that may be useful for the ",(0,i.kt)("a",{parentName:"li",href:"@"},"holder")," (or its ",(0,i.kt)("a",{parentName:"li",href:"@"},"principal"),"), e.g. texts stating the purpose(s) for which the data will be used (",(0,i.kt)("a",{parentName:"li",href:"https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32016R0679&from=EN"},(0,i.kt)("em",{parentName:"a"},"GDPR"))," Art. 5.1.b), or requesting consent (",(0,i.kt)("a",{parentName:"li",href:"https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32016R0679&from=EN"},(0,i.kt)("em",{parentName:"a"},"GDPR"))," Art. 7.2) \u201cin an intelligible and easily accessible form, using clear and plain language\u201d."),(0,i.kt)("li",{parentName:"ul"},"a signature of the ",(0,i.kt)("a",{parentName:"li",href:"@"},"verifiers")," ",(0,i.kt)("a",{parentName:"li",href:"@"},"principal"),", for the purpose of showing compliance with the ",(0,i.kt)("a",{parentName:"li",href:"https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32016R0679&from=EN"},(0,i.kt)("em",{parentName:"a"},"GDPR"))," (e.g. Art 28.3.h), and enabling the ",(0,i.kt)("a",{parentName:"li",href:"@"},"holder's")," ",(0,i.kt)("a",{parentName:"li",href:"@"},"principal")," to obtain proof that the ",(0,i.kt)("a",{parentName:"li",href:"@"},"verifiers")," ",(0,i.kt)("a",{parentName:"li",href:"@"},"principal")," has violated the ",(0,i.kt)("a",{parentName:"li",href:"https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32016R0679&from=EN"},(0,i.kt)("em",{parentName:"a"},"GDPR")),"'s minimization principle asked for data for a particular purpose, which can be used in an argument in disputes about data minimization (",(0,i.kt)("a",{parentName:"li",href:"https://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32016R0679&from=EN"},(0,i.kt)("em",{parentName:"a"},"GDPR"))," Art. 5.1.c).")),(0,i.kt)("p",null,"The request message must be designed in such a way that it is extendable as new features will be called for in the future."),(0,i.kt)("p",null,"In order to make the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," component work, a ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier policy")," object is created by, or on behalf of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),", which specifies at least: ","[","to be elaborated","]"),(0,i.kt)("p",null,"A response to this request (called a ",(0,i.kt)("a",{parentName:"p",href:"@"},"presentation"),") will be obtained from a ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," component of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"peer party"),". This response will contain a reference to the request, allowing the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," to combine them. The ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," will then check that the data in the response is a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," that it has asked for (correct type/",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer"),"), verify the proofs that are provided (predominantly the digital signature), and do some additional checks (e.g. whether or not the ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," has expired, is revoked, and such)."),(0,i.kt)("p",null,"Then, the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," will send a message to the data collector, containing the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction-id"),", the data it has received, and the results of the various checks."),(0,i.kt)("h3",{id:"33---holder-component-and-its-policypreferences"},"3.3.   Holder Component, and its Policy/Preferences"),(0,i.kt)("p",null,"The purpose of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," component is to handle ",(0,i.kt)("a",{parentName:"p",href:"presentation-request@"},"presentation requests")," that it receives from ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," components (both of its own ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),", and of other ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),"), and responding to such requests."),(0,i.kt)("p",null,"Typically, a ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," component would access its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal's")," ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet")," to check if it has a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," that it can use to construct a ",(0,i.kt)("a",{parentName:"p",href:"@"},"presentation")," (i.e. response) that satisfies the received request."),(0,i.kt)("p",null,"It may happen that the ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet")," does not have such a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential"),". However, for every (",(0,i.kt)("a",{parentName:"p",href:"@"},"credential"),", ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer"),") pair, the request should specify the URI that is capable of issuing such a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential"),". If or when the ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder policy")," permit this, the ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," then requests its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal's")," data collector to initiate a new ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," that will get the ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," from that ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer"),", for which a clean ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction form")," would then consist of one that contains said ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential"),". The ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," would then store it in its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal's")," ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet"),", and then proceed to service the ",(0,i.kt)("a",{parentName:"p",href:"@"},"presentation")," request as if it had obtained that ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," from its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal's")," ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet"),"."),(0,i.kt)("p",null,"It may also happen that the ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet")," has multiple ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," that satisfy the request, in which case the ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," must choose the one to use for constructing the ",(0,i.kt)("a",{parentName:"p",href:"@"},"presentation"),". Again, the ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder policy")," will specify how this choice needs to be made, and whether or not this can be done automatically by the ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder"),". If not, the ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," will need to provide for an interaction with a human Colleague that will make such decisions."),(0,i.kt)("p",null,"In order to make the ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," component work, a ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder policy")," object is created by, or on behalf of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),", which specifies e.g.:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"whether or not ",(0,i.kt)("a",{parentName:"li",href:"@"},"credentials")," may be collected 'on the fly';"),(0,i.kt)("li",{parentName:"ul"},"how to choose between ",(0,i.kt)("a",{parentName:"li",href:"@"},"credentials")," that all satisfy a ",(0,i.kt)("a",{parentName:"li",href:"@"},"presentation request")," (and whether the ",(0,i.kt)("a",{parentName:"li",href:"@"},"holder")," can make such choices by itself, or whether or not human interaction is required);"),(0,i.kt)("li",{parentName:"ul"},"the kinds of events and data to write to a ",(0,i.kt)("a",{parentName:"li",href:"@"},"holder"),"-audit-log.")),(0,i.kt)("h3",{id:"34--data-discloser-and-issuing-policy"},"3.4.  Data Discloser and Issuing Policy"),(0,i.kt)("p",null,"The purpose of the data discloser component is to state the (various, sometimes intermediary) results of ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions"),", by collecting data from the Business Data Stores, and creating a set of (related) ",(0,i.kt)("a",{parentName:"p",href:"assertion@"},"statements/claims")," that can subsequently be issued to other ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),". A special kind of result is the (provisioning of) a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," that its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," already has created."),(0,i.kt)("p",null,"Typically, and at any point in time, ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," are capable of expressing ",(0,i.kt)("a",{parentName:"p",href:"assertion@"},"statements")," about ",(0,i.kt)("a",{parentName:"p",href:"@"},"entities")," that they know to exist. They could express ",(0,i.kt)("a",{parentName:"p",href:"assertion@"},"statements")," about individuals, about themselves, the state of ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions"),", and so on. We will use the term '",(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"@"},"subject")," (of a ",(0,i.kt)("a",{parentName:"strong",href:"assertion@"},"statement")," of a ",(0,i.kt)("a",{parentName:"strong",href:"@"},"party"),")"),"' to refer to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"entity")," that this ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," knows to exist, and about whom/which the ",(0,i.kt)("a",{parentName:"p",href:"assertion@"},"statement")," has been made."),(0,i.kt)("p",null,"We will use the term '",(0,i.kt)("strong",{parentName:"p"},"subject-id (of a ",(0,i.kt)("a",{parentName:"strong",href:"assertion@"},"statement")," of a ",(0,i.kt)("a",{parentName:"strong",href:"@"},"party"),")"),"' to refer to the representation that this ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," has chosen to use for referring to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"subject")," in said ",(0,i.kt)("a",{parentName:"p",href:"assertion@"},"statement"),". A subject-id must have the property of being an ",(0,i.kt)("a",{parentName:"p",href:"@"},"identifier")," within every administrative context that this ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," uses. It need not be humanly interpretable (and preferably is not)."),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," need to specify the kinds of ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," they are willing to issue, the class of ",(0,i.kt)("a",{parentName:"p",href:"@"},"entities")," (e.g. people, cars, ",(0,i.kt)("a",{parentName:"p",href:"@"},"organizations"),") for which it will issue them, and the information schema (structure) that it will use in ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," of such kinds.",(0,i.kt)("sup",null,"[Data Discloser.1]")," This allows the data discloser to construct data objects that conform to this information schema, and present it to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," component for actual issuing."),(0,i.kt)("p",null,"The data discloser policy specifies the kinds of (linked-)data-objects that ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," may be created for. This allows the data discloser to construct such a (linked-)data-objects for every subject-id that identifies a ",(0,i.kt)("a",{parentName:"p",href:"@"},"subject")," of the class for which a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," can be issued, which can subsequently be sent to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," component that can turn it into a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," of a specific sort."),(0,i.kt)("p",null,"You can think of the data discloser as the component that pulls all data together that can be put in a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," (e.g. in a passport), and the ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," as the component that puts the data in an (empty) passport, and signing it so as to create the actual ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential"),"."),(0,i.kt)("p",null,"The data discloser may either push ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," data to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," component, so that the ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," always has up-to-date ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials"),", or it can wait until the ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," requests ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," data for the creation of a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," of a specific type for a specific ",(0,i.kt)("a",{parentName:"p",href:"@"},"subject"),"."),(0,i.kt)("hr",null),(0,i.kt)("p",null,"[Data Discloser.1]"," We assume/stipulate that the ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," maintains a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential-catalogue")," that contains this, and other information about every kind of ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," that it issues, and that such catalogues are available to other ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," that want or need to use such ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials"),"."),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"35--issuer-component-and-its-policypreferences"},"3.5.  Issuer Component, and its Policy/Preferences"),(0,i.kt)("p",null,"The purpose of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," component is to issue '",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials"),"', i.e. digital constructs that contain"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"sets of (related) ",(0,i.kt)("a",{parentName:"li",href:"assertion@"},"statements/claims")," (e.g. as produced by the data discloser)"),(0,i.kt)("li",{parentName:"ul"},"metadata (e.g. type of ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential"),", date of issuing and expiration, endpoints, e.g. for revocation checking, ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential type"),", credential advertisements, credential enforcement ",(0,i.kt)("a",{parentName:"li",href:"@"},"policy"),", etc.)"),(0,i.kt)("li",{parentName:"ul"},"proofs (e.g. a digital signature by which third ",(0,i.kt)("a",{parentName:"li",href:"@"},"parties")," can prove its provenance and integrity.")),(0,i.kt)("p",null,"Another purpose that an ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," might serve is to provide a means that allows any other ",(0,i.kt)("a",{parentName:"p",href:"@"},"agent")," that somehow has obtained a copy or ",(0,i.kt)("a",{parentName:"p",href:"@"},"presentation")," of a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential"),", to verify whether or not the data therein is conformant to the business administration of its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),". We will use the term 'revocation service' to refer to such means. Whether or not an ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," provides such a service, and what kind of revocation service is provided (e.g. a revocation list, an online revocation status protocol, etc.), is a decision that its ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal")," should make, and specify in the ",(0,i.kt)("a",{parentName:"p",href:"issuer-policy@"},"issuer  policy"),"."),(0,i.kt)("p",null,"An ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," component may issue ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," in various formats, e.g. as a Verifiable Credential (VC), an Attribute-Based Credential (ABC), an OpenID Connect/JWT token, etc. The issuing ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," must specify ",(0,i.kt)("a",{parentName:"p",href:"credential-type@"},"credential types")," in such a way that if the same ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," is issued in different formats, it is possible for an arbitrary ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," to determine whether or not two ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," that have different formats, are in fact the same. One way of doing this is that the ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," generates an ",(0,i.kt)("a",{parentName:"p",href:"@"},"identifier")," for every ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," that it constructs (before expressing it in a specific format)."),(0,i.kt)("p",null,"After the ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," has created a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," (in one or more formats), it checks the ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet")," to see if it contains a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," of the same type for the same ",(0,i.kt)("a",{parentName:"p",href:"@"},"subject"),". If (one or more formats) are there, and their contents are the same as the newly created ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential"),", the existing ones are revoked, deleted and/or archived/tombstoned.",(0,i.kt)("sup",null,"[Issuer.1]")," Then, the newly created ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," is added to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet")," (in one or more formats). Thus, at any point in time, the ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet")," will contain an actual set of all ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," that have been issued.",(0,i.kt)("sup",null,"[Issuer.2]")),(0,i.kt)("hr",null),(0,i.kt)("p",null,"[Issuer.1]"," Tombstoning is a mechanism that is used e.g. in (distributed) ledgers that do not allow for actual deletion, such as blockchains, by marking entries in the ledger as 'being deleted' (i.e. adding a 'tombstone' to such entries)."),(0,i.kt)("p",null,"[Issuer.2]"," This allows e.g. individuals, that have an ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," component in their SSI app, to issue self-signed ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," and provide them to ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifiers")," that request them as usual for non-self-signed ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials"),"."),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"36--wallet-component-and-its-policypreferences"},"3.6.  Wallet Component, and its Policy/Preferences"),(0,i.kt)("p",null,"The primary purpose of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet")," Component is to (securely) store data, and in particular:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"@"},"credentials")," - both those that have been issued by the ",(0,i.kt)("a",{parentName:"li",href:"@"},"issuer")," (i.e. self-signed ",(0,i.kt)("a",{parentName:"li",href:"@"},"credentials"),") and those that have been obtained from ",(0,i.kt)("a",{parentName:"li",href:"@"},"issuers")," of other ",(0,i.kt)("a",{parentName:"li",href:"@"},"parties"),", and"),(0,i.kt)("li",{parentName:"ul"},"(private) keys e.g. for signing/sealing data on behalf of its ",(0,i.kt)("a",{parentName:"li",href:"@"},"principal"),".")),(0,i.kt)("p",null,"Other kinds of data may be stored by a ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet")," as well - we will have to see what is practical and makes sense."),(0,i.kt)("p",null,"By 'securely storing data' we mean that such data"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"remains available until a request is received from an ",(0,i.kt)("a",{parentName:"p",href:"colleague@"},"digital colleague")," that is entitled to request deletion of such data;")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"remains unchanged during the time in which it is stored;")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"can only become available to ",(0,i.kt)("a",{parentName:"p",href:"colleague@"},"digital colleagues")," that implement a functionality that requires such access (e.g. a ",(0,i.kt)("a",{parentName:"p",href:"@"},"colleague")," ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," component);")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"can only be stored by ",(0,i.kt)("a",{parentName:"p",href:"colleague@"},"digital colleagues")," that implement a functionality that require such data to be stored (e.g. a ",(0,i.kt)("a",{parentName:"p",href:"@"},"colleague")," ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," or ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," component)."))),(0,i.kt)("p",null,"It is expected that components other than the ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder")," and ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer")," will (arise and) need access. One example could be a component that is capable of securely signing data on behalf of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),". Another example could be a component that implements some kind of credential revocation functionality."),(0,i.kt)("p",null,"Human beings cannot directly access any ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet")," component, not even the ones they own. They need an ",(0,i.kt)("a",{parentName:"p",href:"agent@"},"electronic agent")," that is capable of authenticating them as (an ",(0,i.kt)("a",{parentName:"p",href:"@"},"agent")," of) the ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," that owns the ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet")," component, and upon successful authentication provides a User Interface through which the Human Being can instruct this ",(0,i.kt)("a",{parentName:"p",href:"agent@"},"electronic agent")," to manage the ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet's")," contents."),(0,i.kt)("p",null,"In order to make the ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet")," component work, a ",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet policy")," object is created by, or on behalf of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"principal"),", the contents of which remains to be specified."),(0,i.kt)("h2",{id:"4-initial-ssi-agent-network-architecture"},"4. Initial SSI-Agent Network Architecture"),(0,i.kt)("admonition",{title:"Editor's note",type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("em",{parentName:"p"},"The eSSIF-Lab functional architecture is not final. This chapter is an example of how work that is currently being done may already be documented for the purpose of furthering discussions and providing inspiration to readers."))),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," need to deploy (technical) components that act as their ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents"),". Individuals would typically have a mobile app whose user interface allows them to fulfill any or all of the roles of ",(0,i.kt)("a",{parentName:"p",href:"@"},"holder"),", ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," and ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer"),". Wallet functionality may be included in this app, but it might equally well live in the cloud, as a second ",(0,i.kt)("a",{parentName:"p",href:"agent@"},"(digital) agent"),". An individual might also have (cloud) servers that ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents")," of other ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," may contact for conducting ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions")," without the need for the individual itself to do something. All of this holds equally well for larger ",(0,i.kt)("a",{parentName:"p",href:"@"},"organizations"),"."),(0,i.kt)("p",null,"It is conceivable that the set of SSI functions is spread over multiple ",(0,i.kt)("a",{parentName:"p",href:"agent@"},"(digital) agents"),", in which case there is going to be a need for such ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents")," to contact one another, and conduct ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions")," in a way that may differ from doing that with ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents")," of other ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),". Basically, this can be seen as ",(0,i.kt)("a",{parentName:"p",href:"@"},"colleagues")," interacting with one another to get things done within one ",(0,i.kt)("a",{parentName:"p",href:"@"},"organization"),". Seen from the outside, it looks like every ",(0,i.kt)("a",{parentName:"p",href:"@"},"organization")," has a (smaller or larger) network of ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents"),". This chapter provides more details on this topic."),(0,i.kt)("p",null,"The SSI-Agent Network Architecture has two viewpoints:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"the ",(0,i.kt)("strong",{parentName:"li"},"intra-party or single-party SSI viewpoint"),", which focuses on the set of (human and/or electronic) ",(0,i.kt)("a",{parentName:"li",href:"@"},"agents")," of a single, specific ",(0,i.kt)("a",{parentName:"li",href:"@"},"party"),"."),(0,i.kt)("li",{parentName:"ol"},"the ",(0,i.kt)("strong",{parentName:"li"},"inter-party or multi-party SSI viewpoint"),", which is about specific functional components (e.g. ",(0,i.kt)("a",{parentName:"li",href:"@"},"verifier"),", ",(0,i.kt)("a",{parentName:"li",href:"@"},"holder"),", etc.) that typically belong to different ",(0,i.kt)("a",{parentName:"li",href:"@"},"parties"),".")),(0,i.kt)("p",null,"An individual ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," may use the single-",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," SSI viewpoint to come to grips with concerns related to the creation and maintenance of its network of its ",(0,i.kt)("a",{parentName:"p",href:"agent@"},"electronic agent"),". The set of concerns would include:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"How can electronic components be ",(0,i.kt)("a",{parentName:"li",href:"onboarding@"},"onboarded")," as an ",(0,i.kt)("a",{parentName:"li",href:"@"},"agents")," of this ",(0,i.kt)("a",{parentName:"li",href:"@"},"party"),"?"),(0,i.kt)("li",{parentName:"ul"},"How can the integrity of such ",(0,i.kt)("a",{parentName:"li",href:"agent@"},"electronic agent")," be stated in a trustworthy manner (do such components need some kind of accreditation certificate, do we need to come up with a service that can remotely test the integrity of a component and have it issue ephemeral integrity-certificates/",(0,i.kt)("a",{parentName:"li",href:"@"},"credentials"),", \u2026)?"),(0,i.kt)("li",{parentName:"ul"},"How can the ",(0,i.kt)("a",{parentName:"li",href:"@"},"party")," specify which of its ",(0,i.kt)("a",{parentName:"li",href:"@"},"agents")," may talk with which other ",(0,i.kt)("a",{parentName:"li",href:"@"},"agents"),", and for what purposes?"),(0,i.kt)("li",{parentName:"ul"},"How should a ",(0,i.kt)("a",{parentName:"li",href:"@"},"party")," specify the ",(0,i.kt)("a",{parentName:"li",href:"@"},"policies")," for the various SSI functionalities - what kind of support would be useful here?"),(0,i.kt)("li",{parentName:"ul"},"\u2026")),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," that want (their ",(0,i.kt)("a",{parentName:"p",href:"@"},"agents"),") to interact with one another may use the multi-",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," SSI viewpoint to come to grips with concerns related to the interoperability of the functionalities that their components implement. The set of concerns would include:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"How can ",(0,i.kt)("a",{parentName:"li",href:"@"},"parties")," interact with one another at the information level (this includes decentralized semantic interoperability issues, advertising ",(0,i.kt)("a",{parentName:"li",href:"@"},"credentials"),", how a ",(0,i.kt)("a",{parentName:"li",href:"@"},"party")," can find other ",(0,i.kt)("a",{parentName:"li",href:"@"},"parties")," that issue ",(0,i.kt)("a",{parentName:"li",href:"@"},"credentials")," that are useful to him, etc.)"),(0,i.kt)("li",{parentName:"ul"},"What kinds of underlying technologies must ",(0,i.kt)("a",{parentName:"li",href:"@"},"agents")," of a ",(0,i.kt)("a",{parentName:"li",href:"@"},"party")," support so as to be(come) interoperable with ",(0,i.kt)("a",{parentName:"li",href:"@"},"parties")," that it wants to interact with?"),(0,i.kt)("li",{parentName:"ul"},"\u2026")),(0,i.kt)("h2",{id:"5-high-level-transaction-flows"},"5. High Level Transaction Flows"),(0,i.kt)("p",null,"This chapter explains at a high level how electronic ",(0,i.kt)("a",{parentName:"p",href:"transaction@"},"business transactions")," are being conducted. This is prerequisite to the explanations in chapter 4, that describe how the eSSIF-Lab architectural components are used in such ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions"),". For illustrative purposes, we stick to the example of getting a parking permit that we introduced in section 1.1."),(0,i.kt)("h3",{id:"51--overview"},"5.1.  Overview"),(0,i.kt)("br",null),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{alt:"High-level transaction overview",src:(0,o.Z)("images/essif-lab-high-level-trx-overview.png")}),(0,i.kt)("i",null,"Figure 3: High-level transaction overview.")),(0,i.kt)("p",null,"The adjacent figure shows how a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," is conducted at the highest abstraction level. One ",(0,i.kt)("a",{parentName:"p",href:"@"},"party"),", called the 'Requester', sends a request for a product or service to another ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," (that we will call the 'Provider'). Then, they start to negotiate a 'transaction agreement', which means that they exchange data through various channels for the purpose of establishing the details of the product/service to be provided and the compensation, data needed to mitigate ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," ",(0,i.kt)("a",{parentName:"p",href:"@"},"risks"),", etc., all of which is necessary for the ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," to (individually/subjectively) decide whether or not to commit to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),". Section 3.2 provides more detail about this phase."),(0,i.kt)("p",null,"After commitment, the producer works to provide the product or service, and the requester arranges the compensation. This phase is entirely up to the business, and hence out of scope of this document."),(0,i.kt)("p",null,"When all is done, ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," may issue a (signed) ",(0,i.kt)("a",{parentName:"p",href:"assertion@"},"statement")," that specifies the results. Section 3.3. provides some more details about this phase."),(0,i.kt)("p",null,"In the example of the parking permit, a citizen (requester) sends a request to its municipality (provider) for obtaining a parking permit (the product/service). Then, the citizen fills in an online form (and uploads necessary PDFs) to enable the municipality to decide whether or not to produce the requested permit. The eSSIF-Lab architecture adds a secondary, ",(0,i.kt)("a",{parentName:"p",href:"communication-channel@"},"electronic communication channel")," that allows citizens to fill in the forms by using e.g. an SSI app on their phone. When the form is complete, the municipality decides whether or not to produce and issue the permit, which it can do as usual. It can also issue a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," that states the result of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),", i.e. contains the details of the parking permit."),(0,i.kt)("p",null,"Please note that while ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions")," are symmetrical in nature (i.e. both requester and provider need data from the other so as to decide whether or not to commit to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),"), there is an implicit asymmetry in that activities that ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," perform are ordered in time, which implies e.g. that the commitment decisions of both ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," cannot be done at the same time. Also, in practice, it often happens that a ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," requires the other ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," to have executed (and stated) its part of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," before it actually commits to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),". For example, a provider may require the requester to have paid for the product before it is being shipped out. Consequently, the protocols for exchanging data/",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," will need to support such 'asynchronous' ways of working."),(0,i.kt)("h3",{id:"52--transaction-negotiation-phase"},"5.2.  Transaction Negotiation Phase"),(0,i.kt)("p",null,"This phase starts by the requester sending a ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction request")," to the provider, and ends whenever either one of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," quits, or both ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," commit."),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{alt:"High-level transaction negotiation",src:(0,o.Z)("images/essif-lab-high-level-trx-negotiation.png")}),(0,i.kt)("i",null,"Figure 4: High-level transaction negotiation.")),(0,i.kt)("p",null,"This figure shows the high-level interactions during this phase. It starts by the requester sending a request for a product or service to the provider. Typically, this would lead to the provider presenting a (web) form the requester must fill in. In the eSSIF-Lab context, the form will also provide a means for setting up a SSI ",(0,i.kt)("a",{parentName:"p",href:"@"},"communication channel"),", i.e. a secure ",(0,i.kt)("a",{parentName:"p",href:"@"},"communication channel")," through which provider and requester can both request and obtain (",(0,i.kt)("a",{parentName:"p",href:"@"},"presentations")," of) ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials"),", the contents of which they can use to fill in the form. Then, after the form is 'clean', i.e. contains sufficient information for deciding whether or not to commit to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction"),", this phase ends."),(0,i.kt)("p",null,"Note that forms may contain fields that are required only in specific circumstances. It may only be possible to assess whether or not such circumstances apply after some (other) fields have been filled in. This means that the phase for requesting ",(0,i.kt)("a",{parentName:"p",href:"@"},"presentations")," and responding to such requests may very well consist of multiple requests and associated responses."),(0,i.kt)("p",null,"In the example of the parking permit, the municipality might ask for a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," that proves the requester is a citizen that is a registered inhabitant of said municipality, a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," stating its residential address, a ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," stating the make and license plate of the vehicle for which a parking permit is requested, etc. All this is subject to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"policy")," that the municipality has established for issuing such permits, and hence, it must be expected to differ between municipalities."),(0,i.kt)("p",null,"An example of conditionally required fields would be when the requester wants the municipality to customize the parking lot, e.g. because the requester has disabilities. Assessing such circumstances depends on the (optional) field where the requester must state any disabilities they have, and when that is the case, the requester may be asked to fill in fields such as whether or not a parking lot has to be customized (painted blue, with a sign stating that it is reserved for the provided license-place, or the kind of charging device if they have an electric vehicle)."),(0,i.kt)("p",null,"Conversely, the citizen might request the (alleged) municipality to provide ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials"),", e.g. to prove that it is actually an official municipality of the country it is part of. This would provide assurance to the citizen that it would actually be paying the fees to that municipality rather than to e.g. a rogue ",(0,i.kt)("a",{parentName:"p",href:"@"},"organization")," that might have spoofed the website of the municipality."),(0,i.kt)("h3",{id:"53--stating-transactions---issuing-credentials"},"5.3.  Stating Transactions - Issuing Credentials"),(0,i.kt)("p",null,"In the eSSIF-Lab context, we take '",(0,i.kt)("a",{parentName:"p",href:"@"},"credential"),"' to mean any (set of coherent) ",(0,i.kt)("a",{parentName:"p",href:"assertion@"},"statement(s)")," about any (one or more) ",(0,i.kt)("a",{parentName:"p",href:"@"},"subject"),"(s) that a single ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," has issued with proof of provenance (i.e. anyone else can determine the identity of that ",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer"),") and a proof of integrity (i.e. anyone can determine whether or not the content of the ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," has been changed/tampered with since it was issued). From this, it follows that any ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," can issue any kind of ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," for any ",(0,i.kt)("a",{parentName:"p",href:"@"},"entity")," that it knows to exist. A ",(0,i.kt)("a",{parentName:"p",href:"@"},"credential")," does not need to be about a person or an ",(0,i.kt)("a",{parentName:"p",href:"@"},"organization"),", but it can also refer to an order, a delivery, a seat-reservation, a prescription, etc."),(0,i.kt)("p",null,"We foresee two ways in which ",(0,i.kt)("a",{parentName:"p",href:"@"},"credentials")," can be issued:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"both the requester and provider may issue ",(0,i.kt)("a",{parentName:"li",href:"@"},"credentials")," to the other ",(0,i.kt)("a",{parentName:"li",href:"@"},"party")," in the process flow that they are in. They can do so for the purpose of stating any (lack of) progress and/or results of the administrative process flow they are in.\nIn the example of the parking permit, the municipality may need some time to do some manual checks before it can issue the permit; in this case, it could issue a ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential")," that states that the citizen has requested the parking permit and any other details that might be appropriate. Also, if it can issue the parking permit straight away, it can issue a ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential")," that contains the details of that permit. The requester may issue a ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential")," to the municipality stating the date/time and kind of ",(0,i.kt)("a",{parentName:"li",href:"@"},"transaction"),", judgements or comments about the service that the municipality has provided."),(0,i.kt)("li",{parentName:"ol"},"any ",(0,i.kt)("a",{parentName:"li",href:"@"},"party")," may issue a ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential")," upon request. Basically, this means that a ",(0,i.kt)("a",{parentName:"li",href:"@"},"party")," (in the role of requester) issues a request to that other ",(0,i.kt)("a",{parentName:"li",href:"@"},"party")," (in the role of provider) asking for the particular ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential"),". This is just another case of doing ",(0,i.kt)("a",{parentName:"li",href:"@"},"transactions"),", that can be handled just as any other kind of ",(0,i.kt)("a",{parentName:"li",href:"@"},"transaction"),".\nIn the example of the parking permit, when a citizen requests a permit, the provider might look for an existing permit prior to issuing a new one (it would have to do such a check during the process anyway), and depending on its business logic it would be providing the ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential")," without further ado, or start the process of issuing a new one.")),(0,i.kt)("h2",{id:"6-detailed-transaction-flows"},"6. Detailed Transaction Flows"),(0,i.kt)("admonition",{title:"Editor's note",type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("em",{parentName:"p"},"The eSSIF-Lab functional architecture is not final. This chapter is an example of how work that is currently being done may already be documented for the purpose of furthering discussions and providing inspiration to readers."))),(0,i.kt)("p",null,"This chapter explains the details of how electronic ",(0,i.kt)("a",{parentName:"p",href:"transaction@"},"business transactions")," are being conducted using the eSSIF-Lab architectural components as described in chapter 2. We keep on using the parking permit example that we introduced in section 1.1. for illustrative purposes."),(0,i.kt)("p",null,"Note that both ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties"),", requester and provider, each have components as described in chapter 2. Also note that whenever we introduce another ",(0,i.kt)("a",{parentName:"p",href:"@"},"party"),", it too has such components. Thus, every ",(0,i.kt)("a",{parentName:"p",href:"@"},"party")," can play any of the traditional SSI roles '",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier"),"', '",(0,i.kt)("a",{parentName:"p",href:"@"},"holder"),"' and '",(0,i.kt)("a",{parentName:"p",href:"@"},"issuer"),"', and each has its own '",(0,i.kt)("a",{parentName:"p",href:"@"},"wallet"),"' functionality. Also, they all have data collector and data discloser functionality that connect these aforementioned infrastructural components with the business applications."),(0,i.kt)("p",null,"When reading the next sections, please be aware that when a component of one of these ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," communicates with another component, this other component may be of the same ",(0,i.kt)("a",{parentName:"p",href:"@"},"party"),", as well as of the other ",(0,i.kt)("a",{parentName:"p",href:"@"},"party"),". Figure 2 only shows components that belong to a single ",(0,i.kt)("a",{parentName:"p",href:"@"},"party"),"."),(0,i.kt)("h3",{id:"61--starting-a-transaction"},"6.1.  Starting a Transaction"),(0,i.kt)("admonition",{title:"Editor's note",type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("em",{parentName:"p"},"The eSSIF-Lab functional architecture is not final. This section is an example of how work that is currently being done may already be documented for the purpose of furthering discussions and providing inspiration to readers."))),(0,i.kt)("p",null,"The requester starts the ",(0,i.kt)("a",{parentName:"p",href:"@"},"transaction")," by pointing his web-browser to a web-page of the provider that (a) explains how to get a parking permit, and (b) provides a parking-permit application form that needs to be filled in. Technically, this means that the browser does a GET request to an endpoint that is serviced by the providers data collector component."),(0,i.kt)("p",null,"The data collector services this request by creating an empty form of a type appropriate for the request. Then, it continues with requesting data to fill in the form (and providing data as requested by the other Party). It starts this by providing a web page that includes the form to be filled in, as well as a deep-link, QR-code or something similar that allows the requester's browser (plug-in) or SSI-app to contact the provider-endpoint and set up a secure ",(0,i.kt)("a",{parentName:"p",href:"@"},"communication channel")," through which both can communicate electronically. From then on there are two channels between the requester and the provider: one is a traditional (manual) web-browser - web-server channel, the other is one within which the ",(0,i.kt)("a",{parentName:"p",href:"@"},"SSI-Agents")," of various ",(0,i.kt)("a",{parentName:"p",href:"@"},"parties")," will be communicating."),(0,i.kt)("p",null,"It is a task of the data collector to orchestrate the inputs: different parts of the form may be filled in and subsequently changed in different ways. Some parts"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"are required only after a certain condition is met (which is to be evaluated whenever the data that is entered into the form is changed)"),(0,i.kt)("li",{parentName:"ul"},"must or may initially be filled in manually (i.e.: through the browser);"),(0,i.kt)("li",{parentName:"ul"},"must or may initially be filled in with data from a ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential"),";"),(0,i.kt)("li",{parentName:"ul"},"may be changed manually;"),(0,i.kt)("li",{parentName:"ul"},"may be changed with data from a newly supplied ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential"),".")),(0,i.kt)("p",null,"Because of this orchestration, the interface to the ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," component can be quite simple; it is shown in the image below:"),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{alt:"Generic Verification with SSI service",src:(0,o.Z)("images/generic-verification-with-ssi-service.png")}),(0,i.kt)("i",null,"Figure 5: Generic Verification with SSI service.")),(0,i.kt)("p",null,"The request ",(0,i.kt)("a",{parentName:"p",href:"@"},"identifier")," is included in messages between the data collector and ",(0,i.kt)("a",{parentName:"p",href:"@"},"verifier")," so as to allow them to handle different ",(0,i.kt)("a",{parentName:"p",href:"@"},"transactions")," at the same time."),(0,i.kt)("p",null,"We assume that the provider has specified the form and the associated validation- and issuing ",(0,i.kt)("a",{parentName:"p",href:"@"},"policies")," that make the following description work. We refer the reader to section ","[","tbd","]"," for an explanation of how the provider can do this."),(0,i.kt)("h3",{id:"62--stating-a-transaction"},"6.2.  Stating a Transaction"),(0,i.kt)("admonition",{title:"Editor's note",type:"info"},(0,i.kt)("p",{parentName:"admonition"},(0,i.kt)("em",{parentName:"p"},"The eSSIF-Lab functional architecture is not final. This section is an example of how work that is currently being done may already be documented for the purpose of furthering discussions and providing inspiration to readers."))),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{alt:"Generic Issuing with SSI service",src:(0,o.Z)("images/generic-issuing-with-ssi-service.png")}),(0,i.kt)("i",null,"Figure 6: Generic Issuing with SSI service.")),(0,i.kt)("div",{className:"footnotes"},(0,i.kt)("hr",{parentName:"div"}),(0,i.kt)("ol",{parentName:"div"},(0,i.kt)("li",{parentName:"ol",id:"fn-dc.1"},"This feature ensures that the ",(0,i.kt)("a",{parentName:"li",href:"@"},"transaction")," is really two-way, and both ",(0,i.kt)("a",{parentName:"li",href:"@"},"parties")," can request ",(0,i.kt)("a",{parentName:"li",href:"@"},"credentials")," from the other. For example, a web-shop can then ask for a (delivery) address ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential"),", and the customer can ask for a ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential")," issued e.g. by the chamber of commerce that the web-shop is a legitimate company (and not some maffia website).",(0,i.kt)("a",{parentName:"li",href:"#fnref-dc.1",className:"footnote-backref"},"\u21a9")),(0,i.kt)("li",{parentName:"ol",id:"fn-dc.2"},"It may well be that this functionality can somehow be split off in the (near) future.",(0,i.kt)("a",{parentName:"li",href:"#fnref-dc.2",className:"footnote-backref"},"\u21a9")),(0,i.kt)("li",{parentName:"ol",id:"fn-dc.3"},"For high-value ",(0,i.kt)("a",{parentName:"li",href:"@"},"transactions"),", verification proofs are more important than for low-value ",(0,i.kt)("a",{parentName:"li",href:"@"},"transactions"),". This is to be decided by the ",(0,i.kt)("a",{parentName:"li",href:"@"},"principal")," of the data collector. An example from the physical world: in order to obtain a visa for China, it is required that your passport (",(0,i.kt)("a",{parentName:"li",href:"@"},"credential"),") remains valid for 3 months after the end of your visit. But in order to identify yourself at the reception desk of a hotel, your passport may have expired several years.",(0,i.kt)("a",{parentName:"li",href:"#fnref-dc.3",className:"footnote-backref"},"\u21a9")),(0,i.kt)("li",{parentName:"ol",id:"fn-dc.4"},"For example, a ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential")," that contains an address uses a specific schema to specify addresses, e.g. the 'PostalAddress' as defined by schema.org. This schema differs quite a bit from that of Dutch addresses as ",(0,i.kt)("a",{parentName:"li",href:"https://bag.basisregistraties.overheid.nl/def/bag"},(0,i.kt)("em",{parentName:"a"},"defined"))," by the official (authentic) Dutch Registration of Addresses and Buildings (BAG). It may also well differ from the structure of addresses that databases of the ",(0,i.kt)("a",{parentName:"li",href:"@"},"principal")," have implemented. Mapping allows such cases to be accommodated for.",(0,i.kt)("a",{parentName:"li",href:"#fnref-dc.4",className:"footnote-backref"},"\u21a9")),(0,i.kt)("li",{parentName:"ol",id:"fn-dc.5"},"Inconsistent or incoherent data is necessary for various purposes. First, it allows for correct further processing of the ",(0,i.kt)("a",{parentName:"li",href:"@"},"transaction"),". A non-existent postal code, or one that doesn't match the delivery address, may hinder a fluent ",(0,i.kt)("a",{parentName:"li",href:"@"},"transaction")," processing, resulting in additional costs and processing times. Another purpose is the early warning or detection of possible fraud/abuse. Remember that part of the data is being asked for reducing ",(0,i.kt)("a",{parentName:"li",href:"@"},"transaction")," ",(0,i.kt)("a",{parentName:"li",href:"@"},"risk"),", and checking consistency/coherence of such data is part of the risk mitigation process.",(0,i.kt)("a",{parentName:"li",href:"#fnref-dc.5",className:"footnote-backref"},"\u21a9")),(0,i.kt)("li",{parentName:"ol",id:"fn-dc.6"},"This enables the data collector to pass the endpoint URI on to the ",(0,i.kt)("a",{parentName:"li",href:"@"},"verifier")," when it requests for such a ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential"),", which in turn can send it to the ",(0,i.kt)("a",{parentName:"li",href:"@"},"holder")," of other ",(0,i.kt)("a",{parentName:"li",href:"@"},"parties")," enabling them to obtain the ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential")," from that ",(0,i.kt)("a",{parentName:"li",href:"@"},"issuer")," endpoint if that other ",(0,i.kt)("a",{parentName:"li",href:"@"},"party")," does not have that ",(0,i.kt)("a",{parentName:"li",href:"@"},"credential")," in its ",(0,i.kt)("a",{parentName:"li",href:"@"},"wallet"),". The endpoint URI can in fact be put in the ",(0,i.kt)("a",{parentName:"li",href:"@"},"policy"),", because the (human) ",(0,i.kt)("a",{parentName:"li",href:"@"},"agent")," that creates/maintains the ",(0,i.kt)("a",{parentName:"li",href:"@"},"policy")," would need to know that the issuing ",(0,i.kt)("a",{parentName:"li",href:"@"},"party")," is actually issuing such ",(0,i.kt)("a",{parentName:"li",href:"@"},"credentials"),", what their contents means, etc., and hence is capable of tracking down the URI where that ",(0,i.kt)("a",{parentName:"li",href:"@"},"party")," issues the ",(0,i.kt)("a",{parentName:"li",href:"@"},"credentials"),".",(0,i.kt)("a",{parentName:"li",href:"#fnref-dc.6",className:"footnote-backref"},"\u21a9")),(0,i.kt)("li",{parentName:"ol",id:"fn-dc.7"},"A reference to this specification will be added when it becomes available (draft or otherwise).",(0,i.kt)("a",{parentName:"li",href:"#fnref-dc.7",className:"footnote-backref"},"\u21a9")))))}d.isMDXComponent=!0}}]);